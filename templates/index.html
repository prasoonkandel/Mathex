<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mathex - Modern Math Tools</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='root.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='home.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='solver.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='quiz.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='quotes.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='formula.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='distance.css') }}"
    />
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
          displayMath: [
            ["$$", "$$"],
            ["\\[", "\\]"],
          ],
        },
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
  </head>
  <body>
    <nav>
      <div class="nav-container">
        <a href="#" class="logo" data-page="home">Mathex</a>
        <button class="hamburger" id="hamburger" aria-label="Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <ul class="nav-links" id="navLinks">
          <li><a href="#" data-page="home">Home</a></li>
          <li><a href="#" data-page="solver">Solver</a></li>
          <li><a href="#" data-page="quiz">Quiz</a></li>
          <li><a href="#" data-page="formula">Formula</a></li>
          <li><a href="#" data-page="others">Others</a></li>
          <li>
            <button
              class="theme-toggle"
              id="themeToggle"
              aria-label="Toggle theme"
            >
              üåô
            </button>
          </li>
        </ul>
      </div>
    </nav>

    <section id="page-home" class="page-section active">
      <main>
        <section class="hero">
          <h1>Mathex</h1>
          <span class="slogan">Tool built by Student for Students</span>
          <p>
            Mathex is a collection of AI-powered math tools designed to help
            students excel in their studies. It includes a math problem solver
            and a quiz generator to make learning math easier and more engaging.
            Students can use mathex to learn new things by doing experiments and
            solving problems.
          </p>
          <a href="#tools" class="cta-button">Explore Tools</a>
        </section>

        <section class="tools-section" id="tools">
          <h2>Main Mathex Tools</h2>
          <div class="tools-grid">
            <div class="tool-card">
              <div class="tool-badge">Core Tool</div>
              <h3>Math Solver</h3>
              <p>
                Get step-by-step solutions to complex math problems. From
                algebra to calculus, we've got you covered.
              </p>
              <a href="#" data-page="solver" class="tool-link">Try Solver ‚Üí</a>
            </div>

            <div class="tool-card">
              <div class="tool-badge">Core Tool</div>
              <h3>Quiz Generator</h3>
              <p>
                Create customized quizzes for any grade level and topic. Perfect
                for studying and practice.
              </p>
              <a href="#" data-page="quiz" class="tool-link">Generate Quiz ‚Üí</a>
            </div>

            <div class="tool-card">
              <div class="tool-badge">Core Tool</div>
              <h3>Formula Library</h3>
              <p>
                Search and discover mathematical formulas instantly. Get clean
                LaTeX formatted formulas with brief explanations for any math
                concept.
              </p>
              <a href="#" data-page="formula" class="tool-link"
                >Find Formulas ‚Üí</a
              >
            </div>
          </div>
        </section>

        <section class="quotes-section">
          <h2>Mathematical Inspiration</h2>
          <div class="quote-card">
            <div class="quote-icon">"</div>
            <p id="quoteText" class="quote-text">Loading quote...</p>
            <p id="quoteAuthor" class="quote-author"></p>
          </div>
          <button id="newQuoteBtn" class="btn-primary">Get New Quote</button>
        </section>

        <section class="useful-tools-section">
          <h2>Useful Math Tools</h2>
          <p class="section-subtitle">
            Explore additional mathematical utilities and calculators
          </p>
          <div class="tools-preview">
            <div class="mini-tool-card" data-page="distance">
              <h4>Distance Converter</h4>
              <p>Convert between distance units</p>
            </div>
            <div class="mini-tool-card" data-page="others">
              <h4>Geometry Calculator</h4>
              <p>Calculate area, perimeter, volume</p>
            </div>
            <div class="mini-tool-card" data-page="others">
              <h4>Statistics Tool</h4>
              <p>Mean, median, mode, standard deviation</p>
            </div>
          </div>
          <a href="#" data-page="others" class="see-more-link"
            >See All Tools ‚Üí</a
          >
        </section>
      </main>
    </section>

    <section id="page-solver" class="page-section">
      <div class="content">
        <div class="container">
          <a href="#" data-page="home" class="back-to-home">‚Üê Back to Home</a>
          <h1>Math Solver</h1>
          <p class="subtitle">Enter your math problem below</p>

          <div class="symbols-section">
            <label class="symbols-label">Quick Symbols:</label>
            <div class="symbols-grid" id="symbolsGrid">
              <button type="button" class="symbol-btn" data-symbol="œÄ">
                œÄ
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚àû">
                ‚àû
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚àë">
                ‚àë
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚à´">
                ‚à´
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚àö">
                ‚àö
              </button>
              <button type="button" class="symbol-btn" data-symbol="¬≤">
                ¬≤
              </button>
              <button type="button" class="symbol-btn" data-symbol="¬≥">
                ¬≥
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚â§">
                ‚â§
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚â•">
                ‚â•
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚â†">
                ‚â†
              </button>
              <button type="button" class="symbol-btn" data-symbol="¬±">
                ¬±
              </button>
              <button type="button" class="symbol-btn" data-symbol="√ó">
                √ó
              </button>
              <button type="button" class="symbol-btn" data-symbol="√∑">
                √∑
              </button>
              <button type="button" class="symbol-btn" data-symbol="¬∞">
                ¬∞
              </button>
              <button type="button" class="symbol-btn" data-symbol="‚àÜ">
                ‚àÜ
              </button>
              <button type="button" class="symbol-btn" data-symbol="Œ±">
                Œ±
              </button>
              <button type="button" class="symbol-btn" data-symbol="Œ≤">
                Œ≤
              </button>
              <button type="button" class="symbol-btn" data-symbol="Œ∏">
                Œ∏
              </button>
            </div>
          </div>

          <div id="inputArea">
            <form id="solverForm">
              <textarea
                id="question"
                placeholder="Enter your math problem here...&#10;&#10;Example: Solve x¬≤ + 5x + 6 = 0"
                required
              ></textarea>

              <button type="submit" id="submitBtn">Solve Problem</button>
            </form>
          </div>

          <div id="resultArea" style="display: none">
            <div id="result" class="result"></div>
            <button
              type="button"
              id="solveAnotherBtn"
              class="solve-another-btn"
            >
              Solve Another Problem
            </button>
          </div>
        </div>
      </div>
    </section>

    <section id="page-quiz" class="page-section">
      <div class="content">
        <div class="container">
          <a href="#" data-page="home" class="back-to-home">‚Üê Back to Home</a>
          <h1>Quiz Generator</h1>
          <p class="subtitle">Create a custom quiz for practice</p>

          <div id="setupScreen" class="screen active">
            <form id="quizForm">
              <label for="grade">Grade Level</label>
              <select id="grade" required>
                <option value="">Select Grade Level</option>
                <option value="1">Grade 1</option>
                <option value="2">Grade 2</option>
                <option value="3">Grade 3</option>
                <option value="4">Grade 4</option>
                <option value="5">Grade 5</option>
                <option value="6">Grade 6</option>
                <option value="7">Grade 7</option>
                <option value="8">Grade 8</option>
                <option value="9">Grade 9</option>
                <option value="10">Grade 10</option>
                <option value="11">Grade 11</option>
                <option value="12">Grade 12</option>
              </select>

              <label for="topic">Topic/Description</label>
              <textarea
                id="topic"
                placeholder="Enter the topic or description...&#10;&#10;Example: Algebra - Linear equations"
                required
              ></textarea>

              <button type="submit" id="quizSubmitBtn">Generate Quiz</button>
            </form>

            <div id="loadingMessage" class="loading-message"></div>
          </div>

          <div id="quizScreen" class="screen">
            <div class="quiz-header">
              <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
              </div>
              <div class="question-counter" id="questionCounter"></div>
            </div>

            <div id="questionContainer">
              <h2 id="questionText" class="question-text"></h2>
              <div id="optionsContainer" class="options-container"></div>
            </div>

            <div class="quiz-actions">
              <button id="nextBtn" class="btn-secondary">Next Question</button>
            </div>
          </div>

          <div id="resultsScreen" class="screen">
            <div class="results-container">
              <h2>Quiz Complete!</h2>
              <div class="score-display">
                <div class="score-circle">
                  <span id="finalScore" class="score-number">0</span>
                  <span class="score-label">Score</span>
                </div>
              </div>
              <div id="scoreSummary" class="score-summary"></div>
              <button id="retryBtn" class="btn-primary">
                Try Another Quiz
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="page-formula" class="page-section">
      <div class="content">
        <div class="container">
          <a href="#" data-page="home" class="back-to-home">‚Üê Back to Home</a>
          <h1>Formula Library</h1>
          <p class="subtitle">Search for any mathematical formula</p>

          <div id="formulaInputArea">
            <form id="formulaForm">
              <label for="formulaGradeLevel">Grade Level</label>
              <select id="formulaGradeLevel" required>
                <option value="Grade 1">Grade 1</option>
                <option value="Grade 2">Grade 2</option>
                <option value="Grade 3">Grade 3</option>
                <option value="Grade 4">Grade 4</option>
                <option value="Grade 5">Grade 5</option>
                <option value="Grade 6">Grade 6</option>
                <option value="Grade 7">Grade 7</option>
                <option value="Grade 8">Grade 8</option>
                <option value="Grade 9" selected>Grade 9</option>
                <option value="Grade 10">Grade 10</option>
                <option value="Grade 11">Grade 11</option>
                <option value="Grade 12">Grade 12</option>
                <option value="College">College</option>
              </select>

              <input
                type="text"
                id="formulaQuery"
                placeholder="quadratic formula, pythagorean theorem, area of circle..."
                required
              />
              <button type="submit" id="formulaSubmitBtn">Get Formula</button>
            </form>
          </div>

          <div id="formulaResultArea" style="display: none">
            <div id="formulaResult" class="formula-result"></div>
            <button
              type="button"
              id="searchAnotherBtn"
              class="search-another-btn"
            >
              Search Another Formula
            </button>
          </div>
        </div>
      </div>
    </section>

    <section id="page-others" class="page-section">
      <div class="content">
        <div class="container">
          <a href="#" data-page="home" class="back-to-home">‚Üê Back to Home</a>
          <h1>Useful Math Tools</h1>
          <p class="subtitle">
            Additional mathematical utilities and calculators
          </p>

          <div class="tools-grid">
            <div class="tool-card">
              <h3>Distance Converter</h3>
              <p>
                Convert between distance measurement units: miles, kilometers,
                meters, feet, inches, centimeters, and millimeters.
              </p>
              <a href="#" data-page="distance" class="tool-link">Try Now ‚Üí</a>
            </div>

            <div class="tool-card">
              <h3>Geometry Calculator</h3>
              <p>
                Calculate area, perimeter, and volume for various geometric
                shapes including circles, triangles, and spheres.
              </p>
              <button class="tool-link" disabled>Coming Soon</button>
            </div>

            <div class="tool-card">
              <h3>Statistics Tool</h3>
              <p>
                Compute statistical measures like mean, median, mode, range, and
                standard deviation from your data.
              </p>
              <button class="tool-link" disabled>Coming Soon</button>
            </div>

            <div class="tool-card">
              <h3>Number Theory</h3>
              <p>
                Explore prime numbers, factors, GCD, LCM, and other number
                theory concepts.
              </p>
              <button class="tool-link" disabled>Coming Soon</button>
            </div>

            <div class="tool-card">
              <h3>Graph Plotter</h3>
              <p>
                Visualize mathematical functions and equations with interactive
                graphs and critical point analysis.
              </p>
              <button class="tool-link" disabled>Coming Soon</button>
            </div>

            <div class="tool-card">
              <h3>Matrix Calculator</h3>
              <p>
                Perform matrix operations including addition, multiplication,
                determinant, and inverse calculations.
              </p>
              <button class="tool-link" disabled>Coming Soon</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="page-distance" class="page-section">
      <div class="content">
        <div class="container">
          <a href="#" data-page="home" class="back-to-home">‚Üê Back to Home</a>
          <h1>Distance Converter</h1>
          <p class="subtitle">Convert between distance units instantly</p>

          <div class="converter-container">
            <div class="converter-box">
              <label for="fromValue">From</label>
              <input
                type="number"
                id="fromValue"
                placeholder="Enter value"
                step="any"
              />
              <select id="fromUnit">
                <option value="m">Meters (m)</option>
                <option value="km">Kilometers (km)</option>
                <option value="cm">Centimeters (cm)</option>
                <option value="mm">Millimeters (mm)</option>
                <option value="mile">Miles</option>
                <option value="foot">Feet</option>
                <option value="inch">Inches</option>
              </select>
            </div>

            <div class="converter-swap">
              <button id="swapBtn" class="swap-btn">‚áÑ</button>
            </div>

            <div class="converter-box">
              <label for="toValue">To</label>
              <input type="number" id="toValue" placeholder="Result" readonly />
              <select id="toUnit">
                <option value="km">Kilometers (km)</option>
                <option value="m">Meters (m)</option>
                <option value="cm">Centimeters (cm)</option>
                <option value="mm">Millimeters (mm)</option>
                <option value="mile">Miles</option>
                <option value="foot">Feet</option>
                <option value="inch">Inches</option>
              </select>
            </div>
          </div>

          <div class="conversion-info">
            <p id="conversionFormula"></p>
          </div>
        </div>
      </div>
    </section>

    <footer>Mathex | Built by Prasoon Kandel</footer>

    <script src="{{ url_for('static', filename='home.js') }}"></script>
    <script src="{{ url_for('static', filename='solver.js') }}"></script>
    <script src="{{ url_for('static', filename='formula.js') }}"></script>
    <script src="{{ url_for('static', filename='quiz.js') }}"></script>
    <script src="{{ url_for('static', filename='distance.js') }}"></script>
    <script>
      function showPage(pageName) {
        document.querySelectorAll(".page-section").forEach((section) => {
          section.classList.remove("active");
        });

        const pageSection = document.getElementById("page-" + pageName);
        if (pageSection) {
          pageSection.classList.add("active");
        }
        const hamburger = document.getElementById("hamburger");
        const navLinks = document.getElementById("navLinks");
        if (hamburger && navLinks) {
          hamburger.classList.remove("active");
          navLinks.classList.remove("active");
        }

        // Smooth scroll to top on all pages
        setTimeout(() => {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        }, 50);
      }

      document.addEventListener("click", (e) => {
        const target = e.target.closest("[data-page]");
        if (target) {
          e.preventDefault();
          const pageName = target.getAttribute("data-page");
          showPage(pageName);
        }
      });

      showPage("home");

      const quoteText = document.getElementById("quoteText");
      const quoteAuthor = document.getElementById("quoteAuthor");
      const newQuoteBtn = document.getElementById("newQuoteBtn");

      if (quoteText && quoteAuthor) {
        getQuote();
      }

      async function getQuote() {
        newQuoteBtn.disabled = true;
        newQuoteBtn.textContent = "Loading...";
        quoteText.style.opacity = "0.5";
        quoteAuthor.style.opacity = "0.5";

        try {
          const response = await fetch("/api/quotes");
          const data = await response.json();

          if (response.ok) {
            setTimeout(() => {
              quoteText.textContent = data.quote;
              quoteAuthor.textContent = "- " + data.author;
              quoteText.style.opacity = "1";
              quoteAuthor.style.opacity = "1";
            }, 200);
          } else {
            quoteText.textContent = "Error loading quote";
            quoteAuthor.textContent = "";
          }
        } catch (error) {
          quoteText.textContent = "Could not connect to server";
          quoteAuthor.textContent = "";
        } finally {
          newQuoteBtn.disabled = false;
          newQuoteBtn.textContent = "Get New Quote";
        }
      }

      if (newQuoteBtn) {
        newQuoteBtn.addEventListener("click", getQuote);
      }
    </script>
  </body>
</html>
